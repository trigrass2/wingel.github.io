---
layout: post
title: A TDR scope
date: '2011-12-03T18:14:00.002+01:00'
author: Christer Weinigel
tags:
- nerdy stuff
modified_time: '2011-12-04T04:57:21.903+01:00'
thumbnail: http://4.bp.blogspot.com/-pD-pFLVZfDY/TtpIEUnccPI/AAAAAAAAAD4/hDlKr4gVI6I/s72-c/tdr-open.png
blogger_id: tag:blogger.com,1999:blog-4618495377058807667.post-1194861068489069763
permalink: /2011/12/tdr-scope.html
---

I've gone and bought an old oscilloscope, a Tektronix 11801B.&nbsp; The 11801 is a 20 year old design, but it still has some pretty impressive specifications: 50GHz analog bandwidth and takes a sample in 10fs (yes, femtoseconds).&nbsp; With the scope I got a SD-24 sampling module which <i>only</i> has 20GHz bandwidth but it also has a pulse generator to make TDR measurements.<br /><br />So what is TDR?&nbsp; It is an acronym for "Time Domain Reflectometry".&nbsp; What it means is that the scope generates a really fast voltage pulse into a cable and at the same time it is sampling the voltage at the source and showing how the voltage changes over time.&nbsp; With an infinitely long perfect cable the pulse will travel along the cable forever, but in many cases there are imperfections in the cable that reflect the pulse back to the source and change the shape of the signal seen there.&nbsp; <br /><br />There are lots of articles about TDR out there, just google a bit and you'll find a lot of information.&nbsp; I will just write a bit of what I can measure with my scope.<br /><br /><br />The SD-24 module has a SMA connector on the front.&nbsp; If I leave that connector open, the pulse travels from the generator, and reaches the connector.&nbsp; Since there is nothing there is looks like an infinite resistance so the pulse has nowhere to go and is reflected back.&nbsp; The reflected pulse is added to the outgoing pulse which doubles the voltage.&nbsp; This is how it looks at the scope.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><img border="0" height="320" src="http://4.bp.blogspot.com/-pD-pFLVZfDY/TtpIEUnccPI/AAAAAAAAAD4/hDlKr4gVI6I/s320/tdr-open.png" style="margin-left: auto; margin-right: auto;" width="250" /></td></tr><tr><td class="tr-caption" style="text-align: center;">Open circuit</td></tr></tbody></table>The step on the left is the pulse generated by the scope and the step in the middle is the reflection.&nbsp; I have told the scope to grade the horizontal axis in meters, so the scope tells me that Δm, the distance the pulse has travelled, is about 77.6mm.&nbsp; Since the pulse has travelled to the connector and back again, the length of the cable between the source and the connector is half of that, Δm/2, which is 38.8mm.&nbsp; Actually, the scope always measures time, the time between the two steps is about 370ps and assuming that the signal travels at 70% of the speed of light in the cable, the scope calculates that the distance travelled is 370E-2 * 300E6 * 70% = 77.6mm.<br /><br />If I instead short the output, the pulse is shorted to ground at the end and the voltage of the reflected pulse is inverted, so the sum of the outgoing pulse and the reflected pulse is zero.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-q9uB-OVsCJM/TtpIDY8RBpI/AAAAAAAAADo/OFebZgxEb_Y/s1600/tdr-short.png" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://3.bp.blogspot.com/-q9uB-OVsCJM/TtpIDY8RBpI/AAAAAAAAADo/OFebZgxEb_Y/s320/tdr-short.png" width="249" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Short circuit</td></tr></tbody></table>Note that the measured length of the cable is slightly longer, which is quite correct since the shorting plug I added to the end of the connector sticks out a bit so the signal has to travel a slightly longer distance.<br /><br />There are no cables with infinite length, but it is possible to fake it by terminating a cable with a resistor having the same resistance as the <i>characteristic impedance</i> of the cable. Most oscilloscopes and coaxial cables used in a lab have a characteristic impedance of 50Ω, so putting a matching 50Ω terminating resistor at the end will absorb the pulse and there will be no reflection at all.<br /><div class="separator" style="clear: both; text-align: center;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-4Rny2vs_j44/TtpIGdExckI/AAAAAAAAAEQ/2wL8_5oAVFY/s1600/tdr-50.png" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://1.bp.blogspot.com/-4Rny2vs_j44/TtpIGdExckI/AAAAAAAAAEQ/2wL8_5oAVFY/s320/tdr-50.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">50Ω termination</td></tr></tbody></table>Note that there is a bit of a bulge where the terminator is because the SMA connector on the scope or the terminator doesn't have a perfect 50Ω impedance. With a perfect termination there would just be a flat line, but there are no perfect terminators either.<br /><br />If the termination resistor is larger than 50Ω there will be a positive reflected pulse, but the voltage of the pulse will be less than with an open circuit.&nbsp; Here the output is terminated with a 100Ω resistor.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-tQJknMvk2o4/TtpIFlj5cmI/AAAAAAAAAEI/HdIgbrYoVy8/s1600/tdr-100.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/-tQJknMvk2o4/TtpIFlj5cmI/AAAAAAAAAEI/HdIgbrYoVy8/s320/tdr-100.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">100Ω termination</td></tr></tbody></table>The measured impedance of the cable inside the scope, ρ1, is about 50.20Ω and the measured impedance of the terminating resistor, ρ2, is 99.25Ω.&nbsp; Pretty good eh?<br /><br />Similarly, with a smaller terminating resistance there will be a smaller inverted reflected pulse. <br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-du1xrrkP9Tk/TtpIG7PPEjI/AAAAAAAAAEY/sR4_w9jhHWc/s1600/tdr-25.png" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/-du1xrrkP9Tk/TtpIG7PPEjI/AAAAAAAAAEY/sR4_w9jhHWc/s320/tdr-25.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">25Ω termination</td></tr></tbody></table>The measured impedance of the terminating resistor is 25.87Ω.<br /><br />It is quite important to tighten the SMA connectors properly.&nbsp; This is how the signal looks with the same 50Ω terminator when it hasn't been properly tightened.&nbsp; Because there isn't a proper connection the impedance becomes higher and a rather big reflection is generated, the measured impedance is 77.87Ω which is quite a lot.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-PuDKOxojmIk/TtpICuhLXjI/AAAAAAAAADk/dynYqKdonPE/s1600/tdr-torque.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/-PuDKOxojmIk/TtpICuhLXjI/AAAAAAAAADk/dynYqKdonPE/s320/tdr-torque.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Improperly tightened 50Ω terminator</td></tr></tbody></table><br />One of the more practical uses of TDR is to measure the distance to a short or open circuit on cables.&nbsp; If I attach a matched 50cm long coaxial cable to the connector on the scope, the pulse will travel to the end of the cable before being reflected back. The end of this cable was left open, so the same reflection as with the open port is seen, just delayed a lot.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-6HYegQR3dLE/TtpIFJYykOI/AAAAAAAAAEA/PgOvo1z-Qb0/s1600/tdr-cable.png" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/-6HYegQR3dLE/TtpIFJYykOI/AAAAAAAAAEA/PgOvo1z-Qb0/s320/tdr-cable.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">50cm of coaxial cable</td></tr></tbody></table>The measured length, which includes the cable inside the scope, is 562mm which matches reality fairly well: about 40mm of cable inside the scope and another 500mm of coaxial cable outside.&nbsp; The measured length depends on the propagation speed of electricity in the specific kind of coaxial cable used, but normally it's around 70% of the speed of light.&nbsp; With the exact propagation speed for a certain cable it is possible to get a much better distance measurement.<br /><br />This kind of measurement is really useful when trying to figure out where a 1000 meter long buried cable has been damaged.&nbsp; With TDR it's possible to measure the distance to the cut (or short circuit) with a good resolution, so the technicians trying to repair the cable will know exactly where to dig.<br /><br />Imperfections on the cable will also show up as impedance changes and  cause reflections.&nbsp; This is how a cable looks when it is being pinched  hard.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-Tf875s4ECx8/TtpID0nZfmI/AAAAAAAAADw/lVqsUMKvZ6M/s1600/tdr-pinch.png" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/-Tf875s4ECx8/TtpID0nZfmI/AAAAAAAAADw/lVqsUMKvZ6M/s320/tdr-pinch.png" width="250" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Pinched coaxial cable </td></tr></tbody></table>Because the shield comes closer to the center conductor when pinched, the impedance becomes smaller.&nbsp; It's not extremely bad, only 10% difference in impedance, but if this was a TV antenna, this could show up as a ghost image on the screen.&nbsp; In a high speed digital communications system, the reflection could be bad enough to corrupt data, or at least slow down transmission because a packet of data has to be resent.&nbsp; TDR can be used to find this kind of imperfections in a 1000 meter cable too.